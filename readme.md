# Ngan Interactive Dictionary WebUI
## 安装

运行以下命令：

```bash
pip install -r requirements.txt
```

## 使用

运行命令：

```bash
python app.py
```

等待程序启动完毕，出现 `* Running on http://127.0.0.1:5000 Press CTRL+C to quit` 字样，打开 `localhost:5000` 即可使用 Ngan Interactive Dictionary WebUI。

## 功能介绍

Ngan Interactive Dictionary WebUI 提供了一个交互式的词典界面，支持以下功能：

- **词条与文档联动**
  - 点击词条（entry）可自动跳转到文档（docs）中对应的位置。

- **词条状态颜色**
  - **绿色**：词条在文档 H3/H4 中存在。
  - **蓝色**：词条存在于文档中，但不在 H3/H4。
  - **黑色**：词条在文档中完全不存在。

- **文档大纲（TOC）**
  - 自动生成大纲（H1–H4），层级清晰。
  - 点击大纲标题可展开/折叠其子级（例如 H1 控制下属 H2，H2 控制下属 H3）。
  - 折叠状态下子级隐藏，小三角箭头会旋转指示状态。

- **交互体验**
  - 词条与文档高亮联动，点击时会自动滚动定位。
  - 大纲支持缩进和 hover 高亮，方便快速导航。
  - 支持 Ctrl+Z 撤销操作, Ctrl + Shift + Z 取消撤销。
  - 编辑支持 Enter 键确定表单, Esc键退出编辑。

- **词条搜素**
  - 在中间最上方搜素栏，可以通过词条或者含义跳转到对应词条。

## 词库与词条编写

### 词库详情

词库为 项目根目录下的 dictionary.xlsx 文件，里面储存着编辑好的词条信息。此类型——.xlsx方便阅读、传播、和手动修改。

每次会在程序开始的时候生成一份 dictionary.json 文件，与网站直接操作，当后端程序结束，或者前端网页没关闭后都会将 dictionary.json 的内容保存到词库 dictionary.xlsx 文件里。

您也可以手动修改 dictionary.xlsx 内容，但需要修改后才启动本程序，否则内容无法保存。

注意！如果程序运行的时候打开 dictionary.xlsx 可能导致文件被占用而无法使用。

### 如何操作表单：新增与修改词条
在主页面的左侧边栏，你会看到一个 “新增词条” 按钮和词条列表。

- 新增词条
1. 点击 “新增词条” 按钮。

2. 一个表单弹窗会出现在屏幕中央。

3. 在 “词条” 字段中输入你想添加的词语或短语。

4. 在其他字段（如“类型”、“含义”等）中填写相应信息。如果需要添加多个值，请使用分号 ; 进行分隔。

5. 点击 “保存” （或 按 Enter 键）按钮，新词条就会被添加到词典中。

6. 通过 “取消” 按钮， 关闭窗口 或者 按 Esc键 取消编辑。

- 修改词条

1. 在左侧栏的词条列表中，点击你想修改的词条。

2. 右侧面板会显示该词条的详细信息。

3. 点击左侧面板顶部的 “编辑词条” 按钮。

4. 一个预填充了当前词条信息的表单弹窗会弹出。

5. 在表单中修改你想要更改的任何信息。

6. 点击 “保存” 按钮，更改就会生效。

## 文档位置与编写

docs.md：这是当前唯一使用的 Markdown 文档。

位于 static/docs.md 使用第三方md 编辑器编写。

### 编写 Markdown 文档
为了确保词条与文档的联动功能正常，请务必使用以下标题格式：

使用 #  用于一级标题 (H1)

使用 ##  用于二级标题 (H2)

使用 ###  用于三级标题 (H3)

使用 ####  用于四级标题 (H4)

例如：

```
# 词缀大纲  (H1)

## 前缀  (H2)

### 否定 un  (H3)
用于表示否定或相反的意义。

### 再次 re  (H3)
用于表示“再次”或“往回”。

## 后缀 (H2)

### 少 less (H3)
用于表示“没有”或“缺少”。

### 有 ful (H3)
用于表示“充满”或“有”。
```

注意！：标题格式必须是‘释义 条目’如‘否定 un’的形式，这样释义才能通过鼠标悬停显示出来。通过这种方式，你的词条（如 un- 或 re-）就可以与文档中的对应部分无缝链接。